{"ast":null,"code":"module.exports = /******/function (modules) {\n  // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/if (installedModules[moduleId]) {\n      /******/return installedModules[moduleId].exports;\n      /******/\n    }\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/i: moduleId,\n      /******/l: false,\n      /******/exports: {}\n      /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.l = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // define getter function for harmony exports\n  /******/\n  __webpack_require__.d = function (exports, name, getter) {\n    /******/if (!__webpack_require__.o(exports, name)) {\n      /******/Object.defineProperty(exports, name, {\n        enumerable: true,\n        get: getter\n      });\n      /******/\n    }\n    /******/\n  };\n  /******/\n  /******/ // define __esModule on exports\n  /******/\n  __webpack_require__.r = function (exports) {\n    /******/if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n      /******/Object.defineProperty(exports, Symbol.toStringTag, {\n        value: 'Module'\n      });\n      /******/\n    }\n    /******/\n    Object.defineProperty(exports, '__esModule', {\n      value: true\n    });\n    /******/\n  };\n  /******/\n  /******/ // create a fake namespace object\n  /******/ // mode & 1: value is a module id, require it\n  /******/ // mode & 2: merge all properties of value into the ns\n  /******/ // mode & 4: return value when already ns object\n  /******/ // mode & 8|1: behave like require\n  /******/\n  __webpack_require__.t = function (value, mode) {\n    /******/if (mode & 1) value = __webpack_require__(value);\n    /******/\n    if (mode & 8) return value;\n    /******/\n    if (mode & 4 && typeof value === 'object' && value && value.__esModule) return value;\n    /******/\n    var ns = Object.create(null);\n    /******/\n    __webpack_require__.r(ns);\n    /******/\n    Object.defineProperty(ns, 'default', {\n      enumerable: true,\n      value: value\n    });\n    /******/\n    if (mode & 2 && typeof value != 'string') for (var key in value) __webpack_require__.d(ns, key, function (key) {\n      return value[key];\n    }.bind(null, key));\n    /******/\n    return ns;\n    /******/\n  };\n  /******/\n  /******/ // getDefaultExport function for compatibility with non-harmony modules\n  /******/\n  __webpack_require__.n = function (module) {\n    /******/var getter = module && module.__esModule ? /******/function getDefault() {\n      return module['default'];\n    } : /******/function getModuleExports() {\n      return module;\n    };\n    /******/\n    __webpack_require__.d(getter, 'a', getter);\n    /******/\n    return getter;\n    /******/\n  };\n  /******/\n  /******/ // Object.prototype.hasOwnProperty.call\n  /******/\n  __webpack_require__.o = function (object, property) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n  };\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"\";\n  /******/\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(__webpack_require__.s = 23);\n  /******/\n}\n/************************************************************************/\n/******/([/* 0 */\n/***/function (module, exports) {\n  module.exports = require(\"@babel/runtime/regenerator\");\n\n  /***/\n}, /* 1 */\n/***/function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"f\", function () {\n    return iframeDOMElementID;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"g\", function () {\n    return modalDOMElementID;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"h\", function () {\n    return storeKey;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"e\", function () {\n    return UX_MODE;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"c\", function () {\n    return OPENLOGIN_METHOD;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"a\", function () {\n    return ALLOWED_INTERACTIONS;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"d\", function () {\n    return OPENLOGIN_NETWORK;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"b\", function () {\n    return LOGIN_PROVIDER;\n  });\n  var iframeDOMElementID = \"openlogin-iframe\";\n  var modalDOMElementID = \"openlogin-modal\";\n  var storeKey = \"openlogin_store\";\n  var UX_MODE = {\n    POPUP: \"popup\",\n    REDIRECT: \"redirect\"\n  };\n  var OPENLOGIN_METHOD = {\n    LOGIN: \"openlogin_login\",\n    LOGOUT: \"openlogin_logout\",\n    CHECK_3PC_SUPPORT: \"openlogin_check_3PC_support\",\n    SET_PID_DATA: \"openlogin_set_pid_data\",\n    GET_DATA: \"openlogin_get_data\"\n  }; // autocomplete workaround https://github.com/microsoft/TypeScript/issues/29729\n\n  var ALLOWED_INTERACTIONS = {\n    POPUP: \"popup\",\n    REDIRECT: \"redirect\",\n    JRPC: \"jrpc\"\n  };\n  var OPENLOGIN_NETWORK = {\n    MAINNET: \"mainnet\",\n    TESTNET: \"testnet\",\n    DEVELOPMENT: \"development\"\n  };\n  var LOGIN_PROVIDER = {\n    GOOGLE: \"google\",\n    FACEBOOK: \"facebook\",\n    REDDIT: \"reddit\",\n    DISCORD: \"discord\",\n    TWITCH: \"twitch\",\n    APPLE: \"apple\",\n    LINE: \"line\",\n    GITHUB: \"github\",\n    KAKAO: \"kakao\",\n    LINKEDIN: \"linkedin\",\n    TWITTER: \"twitter\",\n    WEIBO: \"weibo\",\n    WECHAT: \"wechat\",\n    EMAIL_PASSWORDLESS: \"email_passwordless\",\n    WEBAUTHN: \"webauthn\",\n    JWT: \"jwt\"\n  };\n  /**\n   * {@label loginProviderType}\n   */\n\n  /***/\n}, /* 2 */\n/***/function (module, exports) {\n  module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");\n\n  /***/\n}, /* 3 */\n/***/function (module, exports) {\n  module.exports = require(\"@babel/runtime/helpers/defineProperty\");\n\n  /***/\n}, /* 4 */\n/***/function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"c\", function () {\n    return documentReady;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"f\", function () {\n    return htmlToElement;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"k\", function () {\n    return whitelistUrl;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"d\", function () {\n    return getHashQueryParams;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"a\", function () {\n    return awaitReq;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"b\", function () {\n    return constructURL;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"j\", function () {\n    return storageAvailable;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"i\", function () {\n    return sessionStorageAvailable;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"g\", function () {\n    return localStorageAvailable;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"h\", function () {\n    return preloadIframe;\n  });\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"e\", function () {\n    return getPopupFeatures;\n  });\n  /* harmony import */\n  var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n  /* harmony import */\n  var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n  /* harmony import */\n  var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n  /* harmony import */\n  var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n  /* harmony import */\n  var _toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9);\n  /* harmony import */\n  var _toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_2__);\n  /* harmony import */\n  var _toruslabs_openlogin_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5);\n  /* harmony import */\n  var _toruslabs_openlogin_utils__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_utils__WEBPACK_IMPORTED_MODULE_3__);\n  function documentReady() {\n    return _documentReady.apply(this, arguments);\n  }\n  function _documentReady() {\n    _documentReady = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", new Promise(function (resolve) {\n                if (document.readyState !== \"loading\") {\n                  resolve();\n                } else {\n                  document.addEventListener(\"DOMContentLoaded\", function () {\n                    resolve();\n                  });\n                }\n              }));\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _documentReady.apply(this, arguments);\n  }\n  var htmlToElement = function htmlToElement(html) {\n    var template = window.document.createElement(\"template\");\n    var trimmedHtml = html.trim(); // Never return a text node of whitespace as the result\n\n    template.innerHTML = trimmedHtml;\n    return template.content.firstChild;\n  };\n  function whitelistUrl(_x, _x2, _x3) {\n    return _whitelistUrl.apply(this, arguments);\n  }\n  function _whitelistUrl() {\n    _whitelistUrl = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2(clientId, appKey, origin) {\n      var appKeyBuf, sig;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              appKeyBuf = Buffer.from(appKey.padStart(64, \"0\"), \"hex\");\n              if (!(_toruslabs_openlogin_utils__WEBPACK_IMPORTED_MODULE_3__[\"base64url\"].encode(Object(_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_2__[\"getPublic\"])(appKeyBuf)) !== clientId)) {\n                _context2.next = 3;\n                break;\n              }\n              throw new Error(\"appKey mismatch\");\n            case 3:\n              _context2.next = 5;\n              return Object(_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_2__[\"sign\"])(appKeyBuf, Buffer.from(Object(_toruslabs_openlogin_utils__WEBPACK_IMPORTED_MODULE_3__[\"keccak\"])(\"keccak256\").update(origin).digest(\"hex\"), \"hex\"));\n            case 5:\n              sig = _context2.sent;\n              return _context2.abrupt(\"return\", _toruslabs_openlogin_utils__WEBPACK_IMPORTED_MODULE_3__[\"base64url\"].encode(sig));\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _whitelistUrl.apply(this, arguments);\n  }\n  function getHashQueryParams() {\n    var replaceUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var result = {};\n    var url = new URL(window.location.href);\n    url.searchParams.forEach(function (value, key) {\n      if (key !== \"result\") {\n        result[key] = value;\n      }\n    });\n    var queryResult = url.searchParams.get(\"result\");\n    if (queryResult) {\n      try {\n        var queryParams = JSON.parse(Object(_toruslabs_openlogin_utils__WEBPACK_IMPORTED_MODULE_3__[\"safeatob\"])(queryResult));\n        Object.keys(queryParams).forEach(function (key) {\n          result[key] = queryParams[key];\n        });\n      } catch (error) {\n        window.console.error(error);\n      }\n    }\n    var hash = url.hash.substr(1);\n    var hashUrl = new URL(\"\".concat(window.location.origin, \"/?\").concat(hash));\n    hashUrl.searchParams.forEach(function (value, key) {\n      if (key !== \"result\") {\n        result[key] = value;\n      }\n    });\n    var hashResult = hashUrl.searchParams.get(\"result\");\n    if (hashResult) {\n      try {\n        var hashParams = JSON.parse(Object(_toruslabs_openlogin_utils__WEBPACK_IMPORTED_MODULE_3__[\"safeatob\"])(hashResult));\n        Object.keys(hashParams).forEach(function (key) {\n          result[key] = hashParams[key];\n        });\n      } catch (error) {\n        window.console.error(error);\n      }\n    }\n    if (replaceUrl) {\n      var cleanUrl = window.location.origin + window.location.pathname;\n      window.history.replaceState(null, \"\", cleanUrl);\n    }\n    return result;\n  }\n  function awaitReq(id, windowRef) {\n    return new Promise(function (resolve, reject) {\n      if (!windowRef) reject(new Error(\"Unable to open window\"));\n      var closedByHandler = false;\n      var closedMonitor = setInterval(function () {\n        if (!closedByHandler && windowRef.closed) {\n          clearInterval(closedMonitor);\n          reject(new Error(\"user closed popup\"));\n        }\n      }, 500);\n      var handler = function handler(ev) {\n        var pid = ev.data.pid;\n        if (id !== pid) return;\n        window.removeEventListener(\"message\", handler);\n        closedByHandler = true;\n        clearInterval(closedMonitor);\n        windowRef.close();\n        if (ev.data.data && ev.data.data.error) {\n          reject(new Error(ev.data.data.error));\n        } else {\n          resolve(ev.data.data);\n        }\n      };\n      window.addEventListener(\"message\", handler);\n    });\n  }\n  function constructURL(params) {\n    var baseURL = params.baseURL,\n      query = params.query,\n      hash = params.hash;\n    var url = new URL(baseURL);\n    if (query) {\n      Object.keys(query).forEach(function (key) {\n        url.searchParams.append(key, query[key]);\n      });\n    }\n    if (hash) {\n      var h = new URL(constructURL({\n        baseURL: baseURL,\n        query: hash\n      })).searchParams.toString();\n      url.hash = h;\n    }\n    return url.toString();\n  }\n  function storageAvailable(type) {\n    var storageExists = false;\n    var storageLength = 0;\n    var storage;\n    try {\n      storage = window[type];\n      storageExists = true;\n      storageLength = storage.length;\n      var x = \"__storage_test__\";\n      storage.setItem(x, x);\n      storage.removeItem(x);\n      return true;\n    } catch (error) {\n      return error && (error.code === 22 ||\n      // Firefox\n      error.code === 1014 ||\n      // test name field too, because code might not be present\n      // everything except Firefox\n      error.name === \"QuotaExceededErro r\" ||\n      // Firefox\n      error.name === \"NS_ERROR_DOM_QUOTA_REACHED\") &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storageExists && storageLength !== 0;\n    }\n  }\n  var sessionStorageAvailable = storageAvailable(\"sessionStorage\");\n  var localStorageAvailable = storageAvailable(\"localStorage\");\n  function preloadIframe(url) {\n    try {\n      var openloginIframeHtml = document.createElement(\"link\");\n      openloginIframeHtml.href = url;\n      openloginIframeHtml.crossOrigin = \"anonymous\";\n      openloginIframeHtml.type = \"text/html\";\n      openloginIframeHtml.rel = \"prefetch\";\n      if (openloginIframeHtml.relList && openloginIframeHtml.relList.supports) {\n        if (openloginIframeHtml.relList.supports(\"prefetch\")) {\n          document.head.appendChild(openloginIframeHtml);\n        }\n      }\n    } catch (error) {\n      window.console.error(error);\n    }\n  }\n  function getPopupFeatures() {\n    // Fixes dual-screen position                             Most browsers      Firefox\n    var dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n    var dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n    var w = 1200;\n    var h = 700;\n    var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : window.screen.width;\n    var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : window.screen.height;\n    var systemZoom = 1; // No reliable estimate\n\n    var left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n    var top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n    var features = \"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=\".concat(h / systemZoom, \",width=\").concat(w / systemZoom, \",top=\").concat(top, \",left=\").concat(left);\n    return features;\n  }\n\n  /***/\n}, /* 5 */\n/***/function (module, exports) {\n  module.exports = require(\"@toruslabs/openlogin-utils\");\n\n  /***/\n}, /* 6 */\n/***/function (module, exports) {\n  module.exports = require(\"@toruslabs/openlogin-jrpc\");\n\n  /***/\n}, /* 7 */\n/***/function (module, exports) {\n  module.exports = require(\"@babel/runtime/helpers/classCallCheck\");\n\n  /***/\n}, /* 8 */\n/***/function (module, exports) {\n  module.exports = require(\"@babel/runtime/helpers/createClass\");\n\n  /***/\n}, /* 9 */\n/***/function (module, exports) {\n  module.exports = require(\"@toruslabs/eccrypto\");\n\n  /***/\n}, /* 10 */\n/***/function (module, exports) {\n  module.exports = require(\"@babel/runtime/helpers/assertThisInitialized\");\n\n  /***/\n}, /* 11 */\n/***/function (module, exports) {\n  module.exports = require(\"@babel/runtime/helpers/slicedToArray\");\n\n  /***/\n}, /* 12 */\n/***/function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  // EXTERNAL MODULE: external \"@babel/runtime/helpers/typeof\"\n  var typeof_ = __webpack_require__(15);\n  var typeof_default = /*#__PURE__*/__webpack_require__.n(typeof_);\n\n  // EXTERNAL MODULE: external \"@babel/runtime/helpers/slicedToArray\"\n  var slicedToArray_ = __webpack_require__(11);\n  var slicedToArray_default = /*#__PURE__*/__webpack_require__.n(slicedToArray_);\n\n  // EXTERNAL MODULE: external \"@babel/runtime/helpers/asyncToGenerator\"\n  var asyncToGenerator_ = __webpack_require__(2);\n  var asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator_);\n\n  // EXTERNAL MODULE: external \"@babel/runtime/helpers/classCallCheck\"\n  var classCallCheck_ = __webpack_require__(7);\n  var classCallCheck_default = /*#__PURE__*/__webpack_require__.n(classCallCheck_);\n\n  // EXTERNAL MODULE: external \"@babel/runtime/helpers/createClass\"\n  var createClass_ = __webpack_require__(8);\n  var createClass_default = /*#__PURE__*/__webpack_require__.n(createClass_);\n\n  // EXTERNAL MODULE: external \"@babel/runtime/helpers/defineProperty\"\n  var defineProperty_ = __webpack_require__(3);\n  var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty_);\n\n  // EXTERNAL MODULE: external \"@babel/runtime/regenerator\"\n  var regenerator_ = __webpack_require__(0);\n  var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator_);\n\n  // EXTERNAL MODULE: external \"@toruslabs/eccrypto\"\n  var eccrypto_ = __webpack_require__(9);\n\n  // EXTERNAL MODULE: external \"@toruslabs/http-helpers\"\n  var http_helpers_ = __webpack_require__(16);\n\n  // EXTERNAL MODULE: external \"@toruslabs/openlogin-jrpc\"\n  var openlogin_jrpc_ = __webpack_require__(6);\n\n  // EXTERNAL MODULE: external \"@toruslabs/openlogin-utils\"\n  var openlogin_utils_ = __webpack_require__(5);\n\n  // EXTERNAL MODULE: external \"lodash.merge\"\n  var external_lodash_merge_ = __webpack_require__(19);\n  var external_lodash_merge_default = /*#__PURE__*/__webpack_require__.n(external_lodash_merge_);\n\n  // EXTERNAL MODULE: ./src/constants.ts\n  var constants = __webpack_require__(1);\n\n  // EXTERNAL MODULE: ./src/utils.ts\n  var utils = __webpack_require__(4);\n\n  // CONCATENATED MODULE: ./src/Modal.ts\n\n  var handleStream = function handleStream(handle, eventName, handler) {\n    var handlerWrapper = function handlerWrapper(chunk) {\n      handler(chunk);\n      handle.removeListener(eventName, handlerWrapper);\n    };\n    handle.on(eventName, handlerWrapper);\n  };\n  var Modal_Modal = /*#__PURE__*/function () {\n    function Modal(modalUrl) {\n      classCallCheck_default()(this, Modal);\n      defineProperty_default()(this, \"modalUrl\", void 0);\n      defineProperty_default()(this, \"iframeElem\", void 0);\n      defineProperty_default()(this, \"initialized\", false);\n      defineProperty_default()(this, \"modalZIndex\", 99999);\n      defineProperty_default()(this, \"mux\", void 0);\n      defineProperty_default()(this, \"verifierStream\", void 0);\n      this.modalUrl = modalUrl;\n    }\n    createClass_default()(Modal, [{\n      key: \"init\",\n      value: function () {\n        var _init = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee() {\n          return regenerator_default.a.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return this.initIFrame(this.modalUrl);\n                case 2:\n                  this.setupStream();\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n        function init() {\n          return _init.apply(this, arguments);\n        }\n        return init;\n      }()\n    }, {\n      key: \"setupStream\",\n      value: function setupStream() {\n        if (this.iframeElem === null) throw new Error(\"iframe is null\");\n        this.mux = Object(openlogin_jrpc_[\"setupMultiplex\"])(new openlogin_jrpc_[\"PostMessageStream\"]({\n          name: \"modal_iframe_rpc\",\n          target: \"modal_rpc\",\n          targetWindow: this.iframeElem.contentWindow\n        }));\n        this.verifierStream = this.mux.createStream(\"verifier\");\n      }\n    }, {\n      key: \"initIFrame\",\n      value: function () {\n        var _initIFrame = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee2(src) {\n          var documentIFrameElem, iframeElem;\n          return regenerator_default.a.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return Object(utils[\"c\" /* documentReady */])();\n\n                case 2:\n                  documentIFrameElem = document.getElementById(constants[\"g\" /* modalDOMElementID */]);\n\n                  if (documentIFrameElem) {\n                    documentIFrameElem.remove();\n                    window.console.log(\"already initialized, removing previous modal iframe\");\n                  }\n                  iframeElem = document.createElement(\"iframe\");\n                  iframeElem.src = src;\n                  iframeElem.id = constants[\"g\" /* modalDOMElementID */];\n                  this.iframeElem = iframeElem;\n                  this._hideModal();\n                  document.body.appendChild(this.iframeElem);\n                case 10:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n        function initIFrame(_x) {\n          return _initIFrame.apply(this, arguments);\n        }\n        return initIFrame;\n      }()\n    }, {\n      key: \"_showModal\",\n      value: function _showModal() {\n        var style = {};\n        style.display = \"block\";\n        style.position = \"fixed\";\n        style.width = \"100%\";\n        style.height = \"100%\";\n        style.top = \"0px\";\n        style.right = \"0px\";\n        style.left = \"0px\";\n        style.bottom = \"0px\";\n        style.border = \"0\";\n        style[\"z-index\"] = this.modalZIndex;\n        this.iframeElem.setAttribute(\"style\", Object.entries(style).map(function (_ref) {\n          var _ref2 = slicedToArray_default()(_ref, 2),\n            k = _ref2[0],\n            v = _ref2[1];\n          return \"\".concat(k, \":\").concat(v);\n        }).join(\";\"));\n      }\n    }, {\n      key: \"_hideModal\",\n      value: function _hideModal() {\n        var style = {};\n        style.display = \"none\";\n        style.position = \"fixed\";\n        style.width = \"100%\";\n        style.height = \"100%\";\n        style.top = \"0px\";\n        style.right = \"0px\";\n        style.left = \"0px\";\n        style.bottom = \"0px\";\n        style.border = \"0\";\n        style[\"z-index\"] = this.modalZIndex;\n        this.iframeElem.setAttribute(\"style\", Object.entries(style).map(function (_ref3) {\n          var _ref4 = slicedToArray_default()(_ref3, 2),\n            k = _ref4[0],\n            v = _ref4[1];\n          return \"\".concat(k, \":\").concat(v);\n        }).join(\";\"));\n      }\n    }, {\n      key: \"_prompt\",\n      value: function () {\n        var _prompt2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee3(clientId, whiteLabel, loginConfig, cb) {\n          var _this = this;\n          var modalHandler;\n          return regenerator_default.a.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  this._showModal();\n                  modalHandler = function modalHandler(chunk) {\n                    _this._hideModal();\n                    cb(chunk);\n                  };\n                  handleStream(this.verifierStream, \"data\", modalHandler);\n                  this.verifierStream.write({\n                    name: \"prompt\",\n                    clientId: clientId,\n                    whiteLabel: whiteLabel,\n                    loginConfig: loginConfig\n                  });\n                case 4:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n        function _prompt(_x2, _x3, _x4, _x5) {\n          return _prompt2.apply(this, arguments);\n        }\n        return _prompt;\n      }()\n    }, {\n      key: \"cleanup\",\n      value: function () {\n        var _cleanup = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee4() {\n          var documentIFrameElem;\n          return regenerator_default.a.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _context4.next = 2;\n                  return Object(utils[\"c\" /* documentReady */])();\n\n                case 2:\n                  documentIFrameElem = document.getElementById(constants[\"g\" /* modalDOMElementID */]);\n\n                  if (documentIFrameElem) {\n                    documentIFrameElem.remove();\n                    this.iframeElem = null;\n                  }\n                  this.initialized = false;\n                case 5:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4, this);\n        }));\n        function cleanup() {\n          return _cleanup.apply(this, arguments);\n        }\n        return cleanup;\n      }()\n    }]);\n    return Modal;\n  }();\n  // EXTERNAL MODULE: ./src/OpenLoginStore.ts + 1 modules\n  var OpenLoginStore = __webpack_require__(14);\n\n  // EXTERNAL MODULE: ./src/Provider.ts\n  var Provider = __webpack_require__(13);\n\n  // CONCATENATED MODULE: ./src/OpenLogin.ts\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) {\n        symbols = symbols.filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n        });\n      }\n      keys.push.apply(keys, symbols);\n    }\n    return keys;\n  }\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          defineProperty_default()(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n    return target;\n  }\n  Object(utils[\"h\" /* preloadIframe */])(\"https://app.openlogin.com/start\");\n  Object(utils[\"h\" /* preloadIframe */])(\"https://app.openlogin.com/sdk-modal\");\n  var OpenLogin_OpenLogin = /*#__PURE__*/function () {\n    function OpenLogin(options) {\n      var _options$no3PC, _options$_startUrl, _options$_popupUrl, _options$redirectUrl, _options$uxMode, _options$replaceUrlOn, _options$originData, _options$whiteLabel, _options$loginConfig;\n      classCallCheck_default()(this, OpenLogin);\n      defineProperty_default()(this, \"provider\", void 0);\n      defineProperty_default()(this, \"state\", void 0);\n      defineProperty_default()(this, \"modal\", void 0);\n      this.provider = new Proxy(new Provider[\"a\" /* default */](), {\n        deleteProperty: function deleteProperty() {\n          return true;\n        } // work around for web3\n      });\n\n      if (!options._iframeUrl) {\n        if (options.network === constants[\"d\" /* OPENLOGIN_NETWORK */].MAINNET) {\n          options._iframeUrl = \"https://app.openlogin.com\";\n        } else if (options.network === constants[\"d\" /* OPENLOGIN_NETWORK */].TESTNET) {\n          options._iframeUrl = \"https://beta.openlogin.com\";\n        } else if (options.network === constants[\"d\" /* OPENLOGIN_NETWORK */].DEVELOPMENT) {\n          options._iframeUrl = \"http://localhost:3000\";\n        }\n      }\n      if (!options._iframeUrl) {\n        throw new Error(\"unspecified network and iframeUrl\");\n      }\n      this.modal = new Modal_Modal(\"\".concat(options._iframeUrl, \"/sdk-modal\"));\n      this.initState(_objectSpread(_objectSpread({}, options), {}, {\n        no3PC: (_options$no3PC = options.no3PC) !== null && _options$no3PC !== void 0 ? _options$no3PC : false,\n        _iframeUrl: options._iframeUrl,\n        _startUrl: (_options$_startUrl = options._startUrl) !== null && _options$_startUrl !== void 0 ? _options$_startUrl : \"\".concat(options._iframeUrl, \"/start\"),\n        _popupUrl: (_options$_popupUrl = options._popupUrl) !== null && _options$_popupUrl !== void 0 ? _options$_popupUrl : \"\".concat(options._iframeUrl, \"/popup-window\"),\n        redirectUrl: (_options$redirectUrl = options.redirectUrl) !== null && _options$redirectUrl !== void 0 ? _options$redirectUrl : \"\".concat(window.location.protocol, \"//\").concat(window.location.host).concat(window.location.pathname),\n        uxMode: (_options$uxMode = options.uxMode) !== null && _options$uxMode !== void 0 ? _options$uxMode : constants[\"e\" /* UX_MODE */].REDIRECT,\n        replaceUrlOnRedirect: (_options$replaceUrlOn = options.replaceUrlOnRedirect) !== null && _options$replaceUrlOn !== void 0 ? _options$replaceUrlOn : true,\n        originData: (_options$originData = options.originData) !== null && _options$originData !== void 0 ? _options$originData : defineProperty_default()({}, window.location.origin, \"\"),\n        whiteLabel: (_options$whiteLabel = options.whiteLabel) !== null && _options$whiteLabel !== void 0 ? _options$whiteLabel : {},\n        loginConfig: (_options$loginConfig = options.loginConfig) !== null && _options$loginConfig !== void 0 ? _options$loginConfig : {}\n      }));\n    }\n    createClass_default()(OpenLogin, [{\n      key: \"initState\",\n      value: function initState(options) {\n        this.state = {\n          uxMode: options.uxMode,\n          network: options.network,\n          store: OpenLoginStore[\"a\" /* default */].getInstance(),\n          iframeUrl: options._iframeUrl,\n          startUrl: options._startUrl,\n          popupUrl: options._popupUrl,\n          clientId: options.clientId,\n          redirectUrl: options.redirectUrl,\n          replaceUrlOnRedirect: options.replaceUrlOnRedirect,\n          originData: options.originData,\n          loginConfig: options.loginConfig,\n          support3PC: !options.no3PC,\n          whiteLabel: options.whiteLabel\n        };\n      }\n    }, {\n      key: \"init\",\n      value: function () {\n        var _init = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee() {\n          var res;\n          return regenerator_default.a.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!this.state.support3PC) {\n                    _context.next = 16;\n                    break;\n                  }\n                  _context.next = 3;\n                  return Promise.all([this.provider.init({\n                    iframeUrl: this.state.iframeUrl\n                  }), this.modal.init(), this.updateOriginData()]);\n                case 3:\n                  this._syncState(Object(utils[\"d\" /* getHashQueryParams */])(this.state.replaceUrlOnRedirect));\n                  _context.next = 6;\n                  return this._check3PCSupport();\n                case 6:\n                  res = _context.sent;\n                  this.state.support3PC = !!res.support3PC;\n                  if (!this.state.support3PC) {\n                    _context.next = 14;\n                    break;\n                  }\n                  _context.t0 = this;\n                  _context.next = 12;\n                  return this._getData();\n                case 12:\n                  _context.t1 = _context.sent;\n                  _context.t0._syncState.call(_context.t0, _context.t1);\n                case 14:\n                  _context.next = 19;\n                  break;\n                case 16:\n                  _context.next = 18;\n                  return this.updateOriginData();\n                case 18:\n                  this._syncState(Object(utils[\"d\" /* getHashQueryParams */])(this.state.replaceUrlOnRedirect));\n                case 19:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n        function init() {\n          return _init.apply(this, arguments);\n        }\n        return init;\n      }()\n    }, {\n      key: \"privKey\",\n      get: function get() {\n        return this.state.privKey ? this.state.privKey.padStart(64, \"0\") : \"\";\n      }\n    }, {\n      key: \"updateOriginData\",\n      value: function () {\n        var _updateOriginData = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee2() {\n          var filteredOriginData, _yield$Promise$all, _yield$Promise$all2, whitelist, whiteLabel;\n          return regenerator_default.a.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  filteredOriginData = JSON.parse(JSON.stringify(this.state.originData));\n                  Object.keys(filteredOriginData).forEach(function (key) {\n                    if (filteredOriginData[key] === \"\") delete filteredOriginData[key];\n                  });\n                  _context2.next = 4;\n                  return Promise.all([this.getWhitelist(), this.getWhiteLabel()]);\n                case 4:\n                  _yield$Promise$all = _context2.sent;\n                  _yield$Promise$all2 = slicedToArray_default()(_yield$Promise$all, 2);\n                  whitelist = _yield$Promise$all2[0];\n                  whiteLabel = _yield$Promise$all2[1];\n                  this._syncState({\n                    originData: _objectSpread(_objectSpread({}, whitelist), filteredOriginData),\n                    whiteLabel: _objectSpread(_objectSpread({}, whiteLabel), this.state.whiteLabel)\n                  });\n                case 9:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n        function updateOriginData() {\n          return _updateOriginData.apply(this, arguments);\n        }\n        return updateOriginData;\n      }()\n    }, {\n      key: \"getWhitelist\",\n      value: function () {\n        var _getWhitelist = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee3() {\n          var clientId, res;\n          return regenerator_default.a.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.prev = 0;\n                  clientId = this.state.clientId;\n                  if (clientId) {\n                    _context3.next = 4;\n                    break;\n                  }\n                  throw new Error(\"unspecified clientId\");\n                case 4:\n                  _context3.next = 6;\n                  return Object(http_helpers_[\"post\"])(\"https://api.developer.tor.us/whitelist\", {\n                    project_id: this.state.clientId\n                  });\n                case 6:\n                  res = _context3.sent;\n                  return _context3.abrupt(\"return\", res.signed_urls);\n                case 10:\n                  _context3.prev = 10;\n                  _context3.t0 = _context3[\"catch\"](0);\n                  return _context3.abrupt(\"return\", {});\n                case 13:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this, [[0, 10]]);\n        }));\n        function getWhitelist() {\n          return _getWhitelist.apply(this, arguments);\n        }\n        return getWhitelist;\n      }()\n    }, {\n      key: \"getWhiteLabel\",\n      value: function () {\n        var _getWhiteLabel = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee4() {\n          var clientId, res;\n          return regenerator_default.a.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _context4.prev = 0;\n                  clientId = this.state.clientId;\n                  if (clientId) {\n                    _context4.next = 4;\n                    break;\n                  }\n                  throw new Error(\"unspecified clientId\");\n                case 4:\n                  _context4.next = 6;\n                  return Object(http_helpers_[\"post\"])(\"https://api.developer.tor.us/whitelabel\", {\n                    project_id: this.state.clientId\n                  });\n                case 6:\n                  res = _context4.sent;\n                  return _context4.abrupt(\"return\", res.whiteLabel);\n                case 10:\n                  _context4.prev = 10;\n                  _context4.t0 = _context4[\"catch\"](0);\n                  return _context4.abrupt(\"return\", {});\n                case 13:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4, this, [[0, 10]]);\n        }));\n        function getWhiteLabel() {\n          return _getWhiteLabel.apply(this, arguments);\n        }\n        return getWhiteLabel;\n      }()\n    }, {\n      key: \"_fastLogin\",\n      value: function () {\n        var _fastLogin2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee5(params) {\n          var defaultParams, loginParams, res;\n          return regenerator_default.a.wrap(function _callee5$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  defaultParams = {\n                    redirectUrl: this.state.redirectUrl\n                  };\n                  loginParams = _objectSpread(_objectSpread({}, defaultParams), params);\n                  _context5.next = 4;\n                  return this.request({\n                    params: [_objectSpread(_objectSpread({}, loginParams), {}, {\n                      fastLogin: true\n                    })],\n                    method: constants[\"c\" /* OPENLOGIN_METHOD */].LOGIN,\n                    startUrl: this.state.startUrl,\n                    popupUrl: this.state.popupUrl,\n                    allowedInteractions: [constants[\"a\" /* ALLOWED_INTERACTIONS */].POPUP, constants[\"a\" /* ALLOWED_INTERACTIONS */].REDIRECT]\n                  });\n                case 4:\n                  res = _context5.sent;\n                  this.state.privKey = res.privKey;\n                  return _context5.abrupt(\"return\", res);\n                case 7:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, _callee5, this);\n        }));\n        function _fastLogin(_x) {\n          return _fastLogin2.apply(this, arguments);\n        }\n        return _fastLogin;\n      }()\n    }, {\n      key: \"login\",\n      value: function () {\n        var _login = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee6(params) {\n          return regenerator_default.a.wrap(function _callee6$(_context6) {\n            while (1) {\n              switch (_context6.prev = _context6.next) {\n                case 0:\n                  if (!(params !== null && params !== void 0 && params.loginProvider)) {\n                    _context6.next = 2;\n                    break;\n                  }\n                  return _context6.abrupt(\"return\", this._selectedLogin(params));\n                case 2:\n                  return _context6.abrupt(\"return\", this._modal(params));\n                case 3:\n                case \"end\":\n                  return _context6.stop();\n              }\n            }\n          }, _callee6, this);\n        }));\n        function login(_x2) {\n          return _login.apply(this, arguments);\n        }\n        return login;\n      }()\n    }, {\n      key: \"_selectedLogin\",\n      value: function () {\n        var _selectedLogin2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee7(params) {\n          var defaultParams, loginParams, res;\n          return regenerator_default.a.wrap(function _callee7$(_context7) {\n            while (1) {\n              switch (_context7.prev = _context7.next) {\n                case 0:\n                  defaultParams = {\n                    redirectUrl: this.state.redirectUrl\n                  };\n                  loginParams = _objectSpread(_objectSpread({\n                    loginProvider: params.loginProvider\n                  }, defaultParams), params); // fast login flow\n                  // if (this.state.store.get(\"touchIDPreference\") === \"enabled\" && !loginParams.extraLoginOptions?.login_hint) {\n                  //   return this._fastLogin(loginParams);\n                  // }\n\n                  _context7.next = 4;\n                  return this.request({\n                    method: constants[\"c\" /* OPENLOGIN_METHOD */].LOGIN,\n                    allowedInteractions: [constants[\"e\" /* UX_MODE */].REDIRECT, constants[\"e\" /* UX_MODE */].POPUP],\n                    startUrl: this.state.startUrl,\n                    popupUrl: this.state.popupUrl,\n                    params: [loginParams]\n                  });\n                case 4:\n                  res = _context7.sent;\n                  this.state.privKey = res.privKey;\n                  return _context7.abrupt(\"return\", {\n                    privKey: this.privKey\n                  });\n                case 7:\n                case \"end\":\n                  return _context7.stop();\n              }\n            }\n          }, _callee7, this);\n        }));\n        function _selectedLogin(_x3) {\n          return _selectedLogin2.apply(this, arguments);\n        }\n        return _selectedLogin;\n      }()\n    }, {\n      key: \"logout\",\n      value: function () {\n        var _logout = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee8() {\n          var logoutParams,\n            params,\n            res,\n            _args8 = arguments;\n          return regenerator_default.a.wrap(function _callee8$(_context8) {\n            while (1) {\n              switch (_context8.prev = _context8.next) {\n                case 0:\n                  logoutParams = _args8.length > 0 && _args8[0] !== undefined ? _args8[0] : {};\n                  params = {}; // defaults\n\n                  params.redirectUrl = this.state.redirectUrl;\n                  params._clientId = this.state.clientId;\n                  if (logoutParams.clientId) {\n                    params._clientId = logoutParams.clientId;\n                  }\n                  if (logoutParams.fastLogin !== undefined) {\n                    params.fastLogin = logoutParams.fastLogin;\n                  }\n                  if (logoutParams.redirectUrl !== undefined) {\n                    params.redirectUrl = logoutParams.redirectUrl;\n                  }\n                  _context8.next = 9;\n                  return this.request({\n                    method: constants[\"c\" /* OPENLOGIN_METHOD */].LOGOUT,\n                    params: [params],\n                    startUrl: this.state.startUrl,\n                    popupUrl: this.state.popupUrl,\n                    allowedInteractions: [constants[\"a\" /* ALLOWED_INTERACTIONS */].JRPC, constants[\"a\" /* ALLOWED_INTERACTIONS */].POPUP, constants[\"a\" /* ALLOWED_INTERACTIONS */].REDIRECT]\n                  });\n                case 9:\n                  res = _context8.sent;\n                  this.state.privKey = \"\"; // if (!params.fastLogin) this.state.store.set(\"touchIDPreference\", \"disabled\");\n\n                  return _context8.abrupt(\"return\", res);\n                case 12:\n                case \"end\":\n                  return _context8.stop();\n              }\n            }\n          }, _callee8, this);\n        }));\n        function logout() {\n          return _logout.apply(this, arguments);\n        }\n        return logout;\n      }()\n    }, {\n      key: \"request\",\n      value: function () {\n        var _request = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee9(args) {\n          var _ref2;\n          var pid, params, session, startUrl, popupUrl, method, allowedInteractions, userData, sig, u, windowRef, _u, _windowRef;\n          return regenerator_default.a.wrap(function _callee9$(_context9) {\n            while (1) {\n              switch (_context9.prev = _context9.next) {\n                case 0:\n                  pid = Object(openlogin_utils_[\"randomId\"])();\n                  params = args.params; // Note: _origin is added later in postMessageStream for jrpc requests\n                  // do not add it here since its used for checking postMessage constraints\n\n                  session = {};\n                  if (!(params.length !== 1)) {\n                    _context9.next = 5;\n                    break;\n                  }\n                  throw new Error(\"request params array should have only one element\");\n                case 5:\n                  startUrl = args.startUrl, popupUrl = args.popupUrl, method = args.method, allowedInteractions = args.allowedInteractions;\n                  if (!(allowedInteractions.length === 0)) {\n                    _context9.next = 8;\n                    break;\n                  }\n                  throw new Error(\"no allowed interactions\");\n                case 8:\n                  if (this.state.clientId) {\n                    session._clientId = this.state.clientId;\n                  }\n                  if (!this.privKey) {\n                    _context9.next = 17;\n                    break;\n                  }\n                  userData = {\n                    clientId: session._clientId,\n                    timestamp: Date.now().toString()\n                  };\n                  _context9.next = 13;\n                  return Object(eccrypto_[\"sign\"])(Buffer.from(this.privKey, \"hex\"), Buffer.from(Object(openlogin_utils_[\"keccak\"])(\"keccak256\").update(JSON.stringify(userData)).digest(\"hex\"), \"hex\"));\n                case 13:\n                  sig = _context9.sent;\n                  session._user = Object(eccrypto_[\"getPublic\"])(Buffer.from(this.privKey, \"hex\")).toString(\"hex\");\n                  session._userSig = openlogin_utils_[\"base64url\"].encode(sig);\n                  session._userData = userData;\n                case 17:\n                  session._originData = this.state.originData;\n                  session._whiteLabelData = this.state.whiteLabel;\n                  session._loginConfig = this.state.loginConfig; // add in session data (allow overrides)\n\n                  params = [_objectSpread(_objectSpread({}, session), params[0])]; // use JRPC where possible\n\n                  if (!(this.state.support3PC && allowedInteractions.includes(constants[\"a\" /* ALLOWED_INTERACTIONS */].JRPC))) {\n                    _context9.next = 23;\n                    break;\n                  }\n                  return _context9.abrupt(\"return\", this._jrpcRequest({\n                    method: method,\n                    params: params\n                  }));\n                case 23:\n                  // set origin\n                  params[0]._origin = new URL((_ref2 = params[0].redirectUrl) !== null && _ref2 !== void 0 ? _ref2 : this.state.redirectUrl).origin; // preset params\n\n                  if (!this.state.support3PC) {\n                    _context9.next = 28;\n                    break;\n                  }\n                  _context9.next = 27;\n                  return this._setPIDData(pid, params);\n                case 27:\n                  // eslint-disable-next-line require-atomic-updates\n                  params = [{}];\n                case 28:\n                  if (!(!startUrl || !popupUrl)) {\n                    _context9.next = 30;\n                    break;\n                  }\n                  throw new Error(\"no url for redirect / popup flow\");\n                case 30:\n                  if (!(this.state.uxMode === constants[\"e\" /* UX_MODE */].REDIRECT)) {\n                    _context9.next = 40;\n                    break;\n                  }\n                  if (!allowedInteractions.includes(constants[\"a\" /* ALLOWED_INTERACTIONS */].REDIRECT)) {\n                    _context9.next = 34;\n                    break;\n                  }\n\n                  // give time for synchronous methods to complete before redirect\n                  setTimeout(function () {\n                    window.location.href = Object(utils[\"b\" /* constructURL */])({\n                      baseURL: startUrl,\n                      hash: {\n                        b64Params: Object(openlogin_utils_[\"jsonToBase64\"])(params[0]),\n                        _pid: pid,\n                        _method: method\n                      }\n                    });\n                  }, 50);\n                  return _context9.abrupt(\"return\", {});\n                case 34:\n                  if (!allowedInteractions.includes(constants[\"a\" /* ALLOWED_INTERACTIONS */].POPUP)) {\n                    _context9.next = 38;\n                    break;\n                  }\n                  u = new URL(Object(utils[\"b\" /* constructURL */])({\n                    baseURL: popupUrl,\n                    hash: {\n                      b64Params: Object(openlogin_utils_[\"jsonToBase64\"])(params[0]),\n                      _pid: pid,\n                      _method: method\n                    }\n                  }));\n                  windowRef = window.open(u.toString(), \"_blank\", Object(utils[\"e\" /* getPopupFeatures */])());\n                  return _context9.abrupt(\"return\", Object(utils[\"a\" /* awaitReq */])(pid, windowRef));\n                case 38:\n                  _context9.next = 47;\n                  break;\n                case 40:\n                  if (!allowedInteractions.includes(constants[\"a\" /* ALLOWED_INTERACTIONS */].POPUP)) {\n                    _context9.next = 44;\n                    break;\n                  }\n                  _u = new URL(Object(utils[\"b\" /* constructURL */])({\n                    baseURL: popupUrl,\n                    hash: {\n                      b64Params: Object(openlogin_utils_[\"jsonToBase64\"])(params[0]),\n                      _pid: pid,\n                      _method: method\n                    }\n                  }));\n                  _windowRef = window.open(_u.toString(), \"_blank\", Object(utils[\"e\" /* getPopupFeatures */])());\n                  return _context9.abrupt(\"return\", Object(utils[\"a\" /* awaitReq */])(pid, _windowRef));\n                case 44:\n                  if (!allowedInteractions.includes(constants[\"a\" /* ALLOWED_INTERACTIONS */].REDIRECT)) {\n                    _context9.next = 47;\n                    break;\n                  }\n\n                  // give time for synchronous methods to complete before redirect\n                  setTimeout(function () {\n                    window.location.href = Object(utils[\"b\" /* constructURL */])({\n                      baseURL: startUrl,\n                      hash: {\n                        b64Params: Object(openlogin_utils_[\"jsonToBase64\"])(params[0]),\n                        _pid: pid,\n                        _method: method\n                      }\n                    });\n                  }, 50);\n                  return _context9.abrupt(\"return\", null);\n                case 47:\n                  throw new Error(\"no matching allowed interactions\");\n                case 48:\n                case \"end\":\n                  return _context9.stop();\n              }\n            }\n          }, _callee9, this);\n        }));\n        function request(_x4) {\n          return _request.apply(this, arguments);\n        }\n        return request;\n      }()\n    }, {\n      key: \"_jrpcRequest\",\n      value: function () {\n        var _jrpcRequest2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee10(args) {\n          var _this = this;\n          var method, params;\n          return regenerator_default.a.wrap(function _callee10$(_context10) {\n            while (1) {\n              switch (_context10.prev = _context10.next) {\n                case 0:\n                  if (!(!args || typeof_default()(args) !== \"object\" || Array.isArray(args))) {\n                    _context10.next = 2;\n                    break;\n                  }\n                  throw new Error(\"invalid request args\");\n                case 2:\n                  method = args.method, params = args.params;\n                  if (!(typeof method !== \"string\" || method.length === 0)) {\n                    _context10.next = 5;\n                    break;\n                  }\n                  throw new Error(\"invalid request method\");\n                case 5:\n                  if (!(params === undefined || !Array.isArray(params))) {\n                    _context10.next = 7;\n                    break;\n                  }\n                  throw new Error(\"invalid request params\");\n                case 7:\n                  if (params.length === 0) {\n                    params.push({});\n                  }\n                  return _context10.abrupt(\"return\", new Promise(function (resolve, reject) {\n                    _this.provider._rpcRequest({\n                      method: method,\n                      params: params\n                    }, Object(openlogin_jrpc_[\"getRpcPromiseCallback\"])(resolve, reject));\n                  }));\n                case 9:\n                case \"end\":\n                  return _context10.stop();\n              }\n            }\n          }, _callee10);\n        }));\n        function _jrpcRequest(_x5) {\n          return _jrpcRequest2.apply(this, arguments);\n        }\n        return _jrpcRequest;\n      }()\n    }, {\n      key: \"_check3PCSupport\",\n      value: function () {\n        var _check3PCSupport2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee11() {\n          return regenerator_default.a.wrap(function _callee11$(_context11) {\n            while (1) {\n              switch (_context11.prev = _context11.next) {\n                case 0:\n                  return _context11.abrupt(\"return\", this._jrpcRequest({\n                    method: constants[\"c\" /* OPENLOGIN_METHOD */].CHECK_3PC_SUPPORT,\n                    params: [{\n                      _originData: this.state.originData\n                    }]\n                  }));\n                case 1:\n                case \"end\":\n                  return _context11.stop();\n              }\n            }\n          }, _callee11, this);\n        }));\n        function _check3PCSupport() {\n          return _check3PCSupport2.apply(this, arguments);\n        }\n        return _check3PCSupport;\n      }()\n    }, {\n      key: \"_setPIDData\",\n      value: function () {\n        var _setPIDData2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee12(pid, data) {\n          return regenerator_default.a.wrap(function _callee12$(_context12) {\n            while (1) {\n              switch (_context12.prev = _context12.next) {\n                case 0:\n                  _context12.next = 2;\n                  return this.request({\n                    allowedInteractions: [constants[\"a\" /* ALLOWED_INTERACTIONS */].JRPC],\n                    method: constants[\"c\" /* OPENLOGIN_METHOD */].SET_PID_DATA,\n                    params: [{\n                      pid: pid,\n                      data: data[0]\n                    }]\n                  });\n                case 2:\n                case \"end\":\n                  return _context12.stop();\n              }\n            }\n          }, _callee12, this);\n        }));\n        function _setPIDData(_x6, _x7) {\n          return _setPIDData2.apply(this, arguments);\n        }\n        return _setPIDData;\n      }()\n    }, {\n      key: \"_getData\",\n      value: function () {\n        var _getData2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee13() {\n          return regenerator_default.a.wrap(function _callee13$(_context13) {\n            while (1) {\n              switch (_context13.prev = _context13.next) {\n                case 0:\n                  return _context13.abrupt(\"return\", this.request({\n                    allowedInteractions: [constants[\"a\" /* ALLOWED_INTERACTIONS */].JRPC],\n                    method: constants[\"c\" /* OPENLOGIN_METHOD */].GET_DATA,\n                    params: [{}]\n                  }));\n                case 1:\n                case \"end\":\n                  return _context13.stop();\n              }\n            }\n          }, _callee13, this);\n        }));\n        function _getData() {\n          return _getData2.apply(this, arguments);\n        }\n        return _getData;\n      }()\n    }, {\n      key: \"_syncState\",\n      value: function _syncState(newState) {\n        var _this2 = this;\n        if (newState.store) {\n          if (typeof_default()(newState.store) !== \"object\") {\n            throw new Error(\"expected store to be an object\");\n          }\n          Object.keys(newState.store).forEach(function (key) {\n            _this2.state.store.set(key, newState.store[key]);\n          });\n        }\n        var store = this.state.store;\n        this.state = _objectSpread(_objectSpread(_objectSpread({}, this.state), newState), {}, {\n          store: store\n        });\n      }\n    }, {\n      key: \"_modal\",\n      value: function () {\n        var _modal2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee15(params) {\n          var _this3 = this;\n          return regenerator_default.a.wrap(function _callee15$(_context15) {\n            while (1) {\n              switch (_context15.prev = _context15.next) {\n                case 0:\n                  return _context15.abrupt(\"return\", new Promise(function (resolve, reject) {\n                    _this3.modal._prompt(_this3.state.clientId, _this3.state.whiteLabel, _this3.state.loginConfig, /*#__PURE__*/function () {\n                      var _ref3 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee14(chunk) {\n                        var selectedLoginResponse;\n                        return regenerator_default.a.wrap(function _callee14$(_context14) {\n                          while (1) {\n                            switch (_context14.prev = _context14.next) {\n                              case 0:\n                                if (!chunk.cancel) {\n                                  _context14.next = 4;\n                                  break;\n                                }\n                                reject(new Error(\"user canceled login\"));\n                                _context14.next = 14;\n                                break;\n                              case 4:\n                                _context14.prev = 4;\n                                _context14.next = 7;\n                                return _this3._selectedLogin(external_lodash_merge_default()(params, chunk));\n                              case 7:\n                                selectedLoginResponse = _context14.sent;\n                                resolve(selectedLoginResponse);\n                                _context14.next = 14;\n                                break;\n                              case 11:\n                                _context14.prev = 11;\n                                _context14.t0 = _context14[\"catch\"](4);\n                                reject(_context14.t0);\n                              case 14:\n                              case \"end\":\n                                return _context14.stop();\n                            }\n                          }\n                        }, _callee14, null, [[4, 11]]);\n                      }));\n                      return function (_x9) {\n                        return _ref3.apply(this, arguments);\n                      };\n                    }());\n                  }));\n                case 1:\n                case \"end\":\n                  return _context15.stop();\n              }\n            }\n          }, _callee15);\n        }));\n        function _modal(_x8) {\n          return _modal2.apply(this, arguments);\n        }\n        return _modal;\n      }()\n    }, {\n      key: \"_cleanup\",\n      value: function () {\n        var _cleanup2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee16() {\n          return regenerator_default.a.wrap(function _callee16$(_context16) {\n            while (1) {\n              switch (_context16.prev = _context16.next) {\n                case 0:\n                  _context16.next = 2;\n                  return this.provider.cleanup();\n                case 2:\n                  _context16.next = 4;\n                  return this.modal.cleanup();\n                case 4:\n                case \"end\":\n                  return _context16.stop();\n              }\n            }\n          }, _callee16, this);\n        }));\n        function _cleanup() {\n          return _cleanup2.apply(this, arguments);\n        }\n        return _cleanup;\n      }()\n    }, {\n      key: \"encrypt\",\n      value: function () {\n        var _encrypt2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee17(message, privateKey) {\n          var privKey;\n          return regenerator_default.a.wrap(function _callee17$(_context17) {\n            while (1) {\n              switch (_context17.prev = _context17.next) {\n                case 0:\n                  privKey = privateKey;\n                  if (!privKey) {\n                    privKey = this.privKey;\n                  } // validations\n\n                  if (/^[0-9a-fA-f]{64}$/.exec(privKey)) {\n                    _context17.next = 8;\n                    break;\n                  }\n                  if (!(privKey === \"\" || privKey === undefined)) {\n                    _context17.next = 7;\n                    break;\n                  }\n                  throw new Error(\"private key cannot be empty\");\n                case 7:\n                  throw new Error(\"invalid private key in encrypt\");\n                case 8:\n                  return _context17.abrupt(\"return\", Object(eccrypto_[\"encrypt\"])(Object(eccrypto_[\"getPublic\"])(Buffer.from(privKey, \"hex\")), message));\n                case 9:\n                case \"end\":\n                  return _context17.stop();\n              }\n            }\n          }, _callee17, this);\n        }));\n        function encrypt(_x10, _x11) {\n          return _encrypt2.apply(this, arguments);\n        }\n        return encrypt;\n      }()\n    }, {\n      key: \"decrypt\",\n      value: function () {\n        var _decrypt2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee18(ciphertext, privateKey) {\n          var privKey;\n          return regenerator_default.a.wrap(function _callee18$(_context18) {\n            while (1) {\n              switch (_context18.prev = _context18.next) {\n                case 0:\n                  privKey = privateKey;\n                  if (!privKey) {\n                    privKey = this.privKey;\n                  } // validations\n\n                  if (/^[0-9a-fA-f]{64}$/.exec(privKey)) {\n                    _context18.next = 8;\n                    break;\n                  }\n                  if (!(privKey === \"\" || privKey === undefined)) {\n                    _context18.next = 7;\n                    break;\n                  }\n                  throw new Error(\"private key cannot be empty\");\n                case 7:\n                  throw new Error(\"invalid private key in decrypt\");\n                case 8:\n                  return _context18.abrupt(\"return\", Object(eccrypto_[\"decrypt\"])(Buffer.from(privKey, \"hex\"), ciphertext));\n                case 9:\n                case \"end\":\n                  return _context18.stop();\n              }\n            }\n          }, _callee18, this);\n        }));\n        function decrypt(_x12, _x13) {\n          return _decrypt2.apply(this, arguments);\n        }\n        return decrypt;\n      }()\n    }, {\n      key: \"getUserInfo\",\n      value: function () {\n        var _getUserInfo = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee19() {\n          var storeData, userInfo;\n          return regenerator_default.a.wrap(function _callee19$(_context19) {\n            while (1) {\n              switch (_context19.prev = _context19.next) {\n                case 0:\n                  if (!this.privKey) {\n                    _context19.next = 4;\n                    break;\n                  }\n                  storeData = this.state.store.getStore();\n                  userInfo = {\n                    email: storeData.email || \"\",\n                    name: storeData.name || \"\",\n                    profileImage: storeData.profileImage || \"\",\n                    aggregateVerifier: storeData.aggregateVerifier || \"\",\n                    verifier: storeData.verifier || \"\",\n                    verifierId: storeData.verifierId || \"\",\n                    typeOfLogin: storeData.typeOfLogin || \"\"\n                  };\n                  return _context19.abrupt(\"return\", userInfo);\n                case 4:\n                  throw new Error(\"user should be logged in to fetch userInfo\");\n                case 5:\n                case \"end\":\n                  return _context19.stop();\n              }\n            }\n          }, _callee19, this);\n        }));\n        function getUserInfo() {\n          return _getUserInfo.apply(this, arguments);\n        }\n        return getUserInfo;\n      }()\n    }]);\n    return OpenLogin;\n  }();\n\n  /* harmony default export */\n  var src_OpenLogin = __webpack_exports__[\"a\"] = OpenLogin_OpenLogin;\n\n  /***/\n}, /* 13 */\n/***/function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  /* harmony export (binding) */\n  __webpack_require__.d(__webpack_exports__, \"a\", function () {\n    return Provider;\n  });\n  /* harmony import */\n  var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n  /* harmony import */\n  var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n  /* harmony import */\n  var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);\n  /* harmony import */\n  var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);\n  /* harmony import */\n  var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8);\n  /* harmony import */\n  var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);\n  /* harmony import */\n  var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(10);\n  /* harmony import */\n  var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__);\n  /* harmony import */\n  var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(20);\n  /* harmony import */\n  var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__);\n  /* harmony import */\n  var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(21);\n  /* harmony import */\n  var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);\n  /* harmony import */\n  var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(17);\n  /* harmony import */\n  var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);\n  /* harmony import */\n  var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(3);\n  /* harmony import */\n  var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__);\n  /* harmony import */\n  var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(0);\n  /* harmony import */\n  var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8__);\n  /* harmony import */\n  var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(6);\n  /* harmony import */\n  var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_9__);\n  /* harmony import */\n  var _toruslabs_openlogin_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(5);\n  /* harmony import */\n  var _toruslabs_openlogin_utils__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_utils__WEBPACK_IMPORTED_MODULE_10__);\n  /* harmony import */\n  var pump__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(22);\n  /* harmony import */\n  var pump__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(pump__WEBPACK_IMPORTED_MODULE_11__);\n  /* harmony import */\n  var _constants__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1);\n  /* harmony import */\n  var _utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(4);\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n    return function _createSuperInternal() {\n      var Super = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Derived),\n        result;\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor;\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n      return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result);\n    };\n  }\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n    try {\n      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n  var Provider = /*#__PURE__*/function (_SafeEventEmitter) {\n    _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default()(Provider, _SafeEventEmitter);\n    var _super = _createSuper(Provider);\n    function Provider() {\n      var _this;\n      _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, Provider);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _super.call.apply(_super, [this].concat(args));\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), \"iframeElem\", null);\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), \"rpcStream\", void 0);\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), \"rpcEngine\", void 0);\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), \"initialized\", void 0);\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), \"mux\", void 0);\n      return _this;\n    }\n    _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(Provider, [{\n      key: \"init\",\n      value: function () {\n        var _init = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default.a.mark(function _callee(_ref) {\n          var iframeUrl;\n          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default.a.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  iframeUrl = _ref.iframeUrl;\n                  _context.next = 3;\n                  return this.initIFrame(iframeUrl);\n                case 3:\n                  _context.next = 5;\n                  return this.setupStream();\n                case 5:\n                  this.initialized = true;\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n        function init(_x) {\n          return _init.apply(this, arguments);\n        }\n        return init;\n      }()\n    }, {\n      key: \"initIFrame\",\n      value: function () {\n        var _initIFrame = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default.a.mark(function _callee2(src) {\n          var documentIFrameElem, iframeElem;\n          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default.a.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return Object(_utils__WEBPACK_IMPORTED_MODULE_13__[/* documentReady */\"c\"])();\n                case 2:\n                  documentIFrameElem = document.getElementById(_constants__WEBPACK_IMPORTED_MODULE_12__[/* iframeDOMElementID */\"f\"]);\n                  if (documentIFrameElem) {\n                    documentIFrameElem.remove();\n                    window.console.log(\"already initialized, removing previous provider iframe\");\n                  }\n                  iframeElem = document.createElement(\"iframe\");\n                  iframeElem.src = src;\n                  iframeElem.id = _constants__WEBPACK_IMPORTED_MODULE_12__[/* iframeDOMElementID */\"f\"];\n                  iframeElem.setAttribute(\"style\", \"display:none; position:fixed; top: 0; left: 0; width: 100%\");\n                  document.body.appendChild(iframeElem);\n                  this.iframeElem = iframeElem;\n                case 10:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n        function initIFrame(_x2) {\n          return _initIFrame.apply(this, arguments);\n        }\n        return initIFrame;\n      }()\n    }, {\n      key: \"setupStream\",\n      value: function () {\n        var _setupStream = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default.a.mark(function _callee3() {\n          var JRPCConnection, rpcEngine;\n          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default.a.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (!(this.iframeElem === null)) {\n                    _context3.next = 2;\n                    break;\n                  }\n                  throw new Error(\"iframe is null\");\n                case 2:\n                  this.rpcStream = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_9__[\"PostMessageStream\"]({\n                    name: \"embed_rpc\",\n                    target: \"iframe_rpc\",\n                    targetWindow: this.iframeElem.contentWindow\n                  });\n                  this.mux = Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_9__[\"setupMultiplex\"])(this.rpcStream);\n                  JRPCConnection = Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_9__[\"createStreamMiddleware\"])();\n                  pump__WEBPACK_IMPORTED_MODULE_11___default()(JRPCConnection.stream, this.mux.createStream(\"jrpc\"), JRPCConnection.stream, function (error) {\n                    window.console.log(\"JRPC connection broken\", error);\n                  });\n                  rpcEngine = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_9__[\"JRPCEngine\"]();\n                  rpcEngine.push(Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_9__[\"createIdRemapMiddleware\"])());\n                  rpcEngine.push(JRPCConnection.middleware);\n                  this.rpcEngine = rpcEngine;\n                case 10:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n        function setupStream() {\n          return _setupStream.apply(this, arguments);\n        }\n        return setupStream;\n      }()\n    }, {\n      key: \"cleanup\",\n      value: function () {\n        var _cleanup = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default.a.mark(function _callee4() {\n          var documentIFrameElem;\n          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default.a.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _context4.next = 2;\n                  return Object(_utils__WEBPACK_IMPORTED_MODULE_13__[/* documentReady */\"c\"])();\n                case 2:\n                  documentIFrameElem = document.getElementById(_constants__WEBPACK_IMPORTED_MODULE_12__[/* iframeDOMElementID */\"f\"]);\n                  if (documentIFrameElem) {\n                    documentIFrameElem.remove();\n                    this.iframeElem = null;\n                  }\n                  this.initialized = false;\n                case 5:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4, this);\n        }));\n        function cleanup() {\n          return _cleanup.apply(this, arguments);\n        }\n        return cleanup;\n      }()\n    }, {\n      key: \"_rpcRequest\",\n      value: function _rpcRequest(payload, callback) {\n        if (!payload.jsonrpc) {\n          payload.jsonrpc = \"2.0\";\n        }\n        if (!payload.id) {\n          payload.id = Object(_toruslabs_openlogin_utils__WEBPACK_IMPORTED_MODULE_10__[\"randomId\"])();\n        }\n        this.rpcEngine.handle(payload, callback);\n      }\n    }]);\n    return Provider;\n  }(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_9__[\"SafeEventEmitter\"]);\n\n  /***/\n}, /* 14 */\n/***/function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  // EXPORTS\n  __webpack_require__.d(__webpack_exports__, \"a\", function () {\n    return (/* binding */OpenLoginStore_OpenLoginStore\n    );\n  });\n\n  // EXTERNAL MODULE: external \"@babel/runtime/helpers/classCallCheck\"\n  var classCallCheck_ = __webpack_require__(7);\n  var classCallCheck_default = /*#__PURE__*/__webpack_require__.n(classCallCheck_);\n\n  // EXTERNAL MODULE: external \"@babel/runtime/helpers/createClass\"\n  var createClass_ = __webpack_require__(8);\n  var createClass_default = /*#__PURE__*/__webpack_require__.n(createClass_);\n\n  // EXTERNAL MODULE: external \"@babel/runtime/helpers/defineProperty\"\n  var defineProperty_ = __webpack_require__(3);\n  var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty_);\n\n  // EXTERNAL MODULE: ./src/constants.ts\n  var constants = __webpack_require__(1);\n\n  // CONCATENATED MODULE: ./src/MemoryStore.ts\n\n  var MemoryStore_MemoryStore = /*#__PURE__*/function () {\n    function MemoryStore() {\n      classCallCheck_default()(this, MemoryStore);\n      defineProperty_default()(this, \"store\", {});\n    }\n    createClass_default()(MemoryStore, [{\n      key: \"getItem\",\n      value: function getItem(key) {\n        return this.store[key];\n      }\n    }, {\n      key: \"setItem\",\n      value: function setItem(key, value) {\n        this.store[key] = value;\n      }\n    }]);\n    return MemoryStore;\n  }();\n  // EXTERNAL MODULE: ./src/utils.ts\n  var utils = __webpack_require__(4);\n\n  // CONCATENATED MODULE: ./src/OpenLoginStore.ts\n\n  var OpenLoginStore_OpenLoginStore = /*#__PURE__*/function () {\n    function OpenLoginStore(storage) {\n      classCallCheck_default()(this, OpenLoginStore);\n      defineProperty_default()(this, \"storage\", void 0);\n      this.storage = storage;\n      if (!storage.getItem(constants[\"h\" /* storeKey */])) {\n        this.resetStore();\n      }\n    }\n    createClass_default()(OpenLoginStore, [{\n      key: \"toJSON\",\n      value: function toJSON() {\n        return this.storage.getItem(constants[\"h\" /* storeKey */]);\n      }\n    }, {\n      key: \"resetStore\",\n      value: function resetStore() {\n        var currStore = this.getStore();\n        this.storage.setItem(constants[\"h\" /* storeKey */], JSON.stringify({}));\n        return currStore;\n      }\n    }, {\n      key: \"getStore\",\n      value: function getStore() {\n        return JSON.parse(this.storage.getItem(constants[\"h\" /* storeKey */]));\n      }\n    }, {\n      key: \"get\",\n      value: function get(key) {\n        var store = JSON.parse(this.storage.getItem(constants[\"h\" /* storeKey */]));\n        return store[key];\n      }\n    }, {\n      key: \"set\",\n      value: function set(key, value) {\n        var store = JSON.parse(this.storage.getItem(constants[\"h\" /* storeKey */]));\n        store[key] = value;\n        this.storage.setItem(constants[\"h\" /* storeKey */], JSON.stringify(store));\n      }\n    }], [{\n      key: \"getInstance\",\n      value: function getInstance() {\n        if (!this.instance) {\n          this.instance = new this(utils[\"g\" /* localStorageAvailable */] ? localStorage : new MemoryStore_MemoryStore());\n        }\n        return this.instance;\n      }\n    }]);\n    return OpenLoginStore;\n  }();\n  defineProperty_default()(OpenLoginStore_OpenLoginStore, \"instance\", void 0);\n\n  /***/\n}, /* 15 */\n/***/function (module, exports) {\n  module.exports = require(\"@babel/runtime/helpers/typeof\");\n\n  /***/\n}, /* 16 */\n/***/function (module, exports) {\n  module.exports = require(\"@toruslabs/http-helpers\");\n\n  /***/\n}, /* 17 */\n/***/function (module, exports) {\n  module.exports = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\n  /***/\n}, /* 18 */\n/***/function (module, exports) {\n\n  /***/}, /* 19 */\n/***/function (module, exports) {\n  module.exports = require(\"lodash.merge\");\n\n  /***/\n}, /* 20 */\n/***/function (module, exports) {\n  module.exports = require(\"@babel/runtime/helpers/inherits\");\n\n  /***/\n}, /* 21 */\n/***/function (module, exports) {\n  module.exports = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\n  /***/\n}, /* 22 */\n/***/function (module, exports) {\n  module.exports = require(\"pump\");\n\n  /***/\n}, /* 23 */\n/***/function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony import */\n  var _src_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"iframeDOMElementID\", function () {\n    return _src_constants__WEBPACK_IMPORTED_MODULE_0__[\"f\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"modalDOMElementID\", function () {\n    return _src_constants__WEBPACK_IMPORTED_MODULE_0__[\"g\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"storeKey\", function () {\n    return _src_constants__WEBPACK_IMPORTED_MODULE_0__[\"h\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"UX_MODE\", function () {\n    return _src_constants__WEBPACK_IMPORTED_MODULE_0__[\"e\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"OPENLOGIN_METHOD\", function () {\n    return _src_constants__WEBPACK_IMPORTED_MODULE_0__[\"c\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"ALLOWED_INTERACTIONS\", function () {\n    return _src_constants__WEBPACK_IMPORTED_MODULE_0__[\"a\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"OPENLOGIN_NETWORK\", function () {\n    return _src_constants__WEBPACK_IMPORTED_MODULE_0__[\"d\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"LOGIN_PROVIDER\", function () {\n    return _src_constants__WEBPACK_IMPORTED_MODULE_0__[\"b\"];\n  });\n\n  /* harmony import */\n  var _src_IStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(18);\n  /* harmony import */\n  var _src_IStore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_src_IStore__WEBPACK_IMPORTED_MODULE_1__);\n  /* harmony reexport (unknown) */\n  for (var __WEBPACK_IMPORT_KEY__ in _src_IStore__WEBPACK_IMPORTED_MODULE_1__) if ([\"default\", \"OpenLoginStore\", \"Provider\", \"iframeDOMElementID\", \"modalDOMElementID\", \"storeKey\", \"UX_MODE\", \"OPENLOGIN_METHOD\", \"ALLOWED_INTERACTIONS\", \"OPENLOGIN_NETWORK\", \"LOGIN_PROVIDER\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function (key) {\n    __webpack_require__.d(__webpack_exports__, key, function () {\n      return _src_IStore__WEBPACK_IMPORTED_MODULE_1__[key];\n    });\n  })(__WEBPACK_IMPORT_KEY__);\n  /* harmony import */\n  var _src_OpenLogin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12);\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"default\", function () {\n    return _src_OpenLogin__WEBPACK_IMPORTED_MODULE_2__[\"a\"];\n  });\n\n  /* harmony import */\n  var _src_OpenLoginStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(14);\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"OpenLoginStore\", function () {\n    return _src_OpenLoginStore__WEBPACK_IMPORTED_MODULE_3__[\"a\"];\n  });\n\n  /* harmony import */\n  var _src_Provider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13);\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"Provider\", function () {\n    return _src_Provider__WEBPACK_IMPORTED_MODULE_4__[\"a\"];\n  });\n\n  /* harmony import */\n  var _src_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4);\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"documentReady\", function () {\n    return _src_utils__WEBPACK_IMPORTED_MODULE_5__[\"c\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"htmlToElement\", function () {\n    return _src_utils__WEBPACK_IMPORTED_MODULE_5__[\"f\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"whitelistUrl\", function () {\n    return _src_utils__WEBPACK_IMPORTED_MODULE_5__[\"k\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"getHashQueryParams\", function () {\n    return _src_utils__WEBPACK_IMPORTED_MODULE_5__[\"d\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"awaitReq\", function () {\n    return _src_utils__WEBPACK_IMPORTED_MODULE_5__[\"a\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"constructURL\", function () {\n    return _src_utils__WEBPACK_IMPORTED_MODULE_5__[\"b\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"storageAvailable\", function () {\n    return _src_utils__WEBPACK_IMPORTED_MODULE_5__[\"j\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"sessionStorageAvailable\", function () {\n    return _src_utils__WEBPACK_IMPORTED_MODULE_5__[\"i\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"localStorageAvailable\", function () {\n    return _src_utils__WEBPACK_IMPORTED_MODULE_5__[\"g\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"preloadIframe\", function () {\n    return _src_utils__WEBPACK_IMPORTED_MODULE_5__[\"h\"];\n  });\n\n  /* harmony reexport (safe) */\n  __webpack_require__.d(__webpack_exports__, \"getPopupFeatures\", function () {\n    return _src_utils__WEBPACK_IMPORTED_MODULE_5__[\"e\"];\n  });\n\n  /***/\n}\n/******/]);","map":null,"metadata":{},"sourceType":"script"}